<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enter PIN</title>
    <script>
        // Generate a random 1-digit PIN
        const generatedPin = Math.floor(Math.random() * 10); // random number between 0-9
        console.log("Generated PIN:", generatedPin); // for debugging (remove later)

        // Correct Base64 encoded link
        // Encoding the URL and replacing URL-unsafe characters
        const encodedLink = "aHR0cHM6Ly9jaGF0LndoYXRzYXBwLmNvbS9Fa2p5NnlyYlYxNTYxdUoyaTZHSzlt"; // Manually encoded for simplicity

        // Decode the Base64 URL-safe string
        function decodeBase64UrlSafe(encoded) {
            // Replace URL-safe characters with the original Base64 characters
            const base64 = encoded.replace(/-/g, '+').replace(/_/g, '/');
            return decodeURIComponent(escape(window.atob(base64)));
        }

        function checkPin() {
            // Get the user input
            const userPin = document.getElementById('pinInput').value;

            // Check if the user entered the correct PIN
            if (userPin == generatedPin) {
                // If correct, decode the link and redirect
                const decodedLink = decodeBase64UrlSafe(encodedLink);
                window.location.href = decodedLink;
            } else {
                // If incorrect, show alert and clear the input field
                alert("Incorrect PIN! Please try again.");
                document.getElementById('pinInput').value = '';
            }
        }
    </script>
</head>
<body>
    <h2>Enter PIN to Access the Link</h2>
    <p>Please enter the one-digit PIN:</p>
    <input type="text" id="pinInput" maxlength="1" pattern="\d*" required>
    <button onclick="checkPin()">Submit</button>
</body>
</html>
